{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '36656035-48a6982af67e259d89e542d44';\n\nexport async function performSearch(query, page = 1, perPage = 40) {\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  const { data } = await axios.get(apiUrl);\n  return data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { performSearch } from './pixabay-api';\n\nconst el = {\n  searchForm: document.getElementById('search-form'),\n  searchQueryInput: document.getElementsByName('searchQuery')[0],\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captions: true,\n});\nlet searchQuery = '';\nlet currentPage = 1;\n\nel.searchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentPage = 1;\n  searchQuery = el.searchQueryInput.value.trim();\n  if (!searchQuery) {\n    Notiflix.Report.failure('Please enter a request', 'OK');\n    el.searchQueryInput.value = '';\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await performSearch(searchQuery, currentPage);\n\n    if (totalHits === 0) {\n      displayNoResultsMessage();\n      return;\n    }\n\n    if (totalHits <= 40) {\n      Notiflix.Report.info(\n        'Search Results',\n        `Hooray! We found ${totalHits} images. Sorry, but that's all I could find. You have reached the end of your search.`,\n        'OK'\n      );\n    } else {\n      Notiflix.Report.success(\n        'Search Results',\n        `Hooray! We found ${totalHits} images.`,\n        'OK'\n      );\n    }\n\n    displayImages(hits, totalHits);\n    checkingTheNumberOfCards(hits);\n  } catch (error) {\n    console.error('Search error:', error);\n\n    Notiflix.Report.failure(\n      'Search Error',\n      'Sorry, there was an error retrieving the images. Please try again later.',\n      'OK'\n    );\n  }\n});\n\nel.loadMoreBtn.addEventListener('click', async event => {\n  currentPage += 1;\n  try {\n    const { hits } = await performSearch(searchQuery, currentPage);\n    checkingTheNumberOfCards(hits);\n    el.gallery.insertAdjacentHTML('beforeend', createMarkup(hits));\n  } catch (error) {\n    console.error('Load more error:', error);\n  }\n  lightbox.refresh();\n});\n\nfunction displayImages(hits) {\n  el.gallery.innerHTML = createMarkup(hits);\n  lightbox.refresh();\n}\nfunction checkingTheNumberOfCards(hits) {\n  if (hits.length >= 40) {\n    el.loadMoreBtn.style.display = 'block';\n  } else {\n    el.loadMoreBtn.style.display = 'none';\n    Notiflix.Report.info(\n      'End of Results',\n      \"We're sorry, but you've reached the end of search results.\",\n      'OK'\n    );\n  }\n}\nfunction displayNoResultsMessage() {\n  el.searchQueryInput.value = '';\n  el.gallery.innerHTML = '';\n  el.loadMoreBtn.style.display = 'none';\n\n  Notiflix.Report.failure(\n    'No results found',\n    'Please try another search',\n    'OK'\n  );\n}\n\nfunction createMarkup(galleryItems) {\n  return galleryItems\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <div class=\"photo-card\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\" title=\"${tags}\" >\n            <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"300\" loading=\"lazy\">\n          </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes</b> ${likes}</p>\n            <p class=\"info-item\">\n            <b>Views</b> ${views}</p>\n            <p class=\"info-item\">\n            <b>Comments</b> ${comments}</p>\n            <p class=\"info-item\">\n            <b>Downloads</b> ${downloads}</p>\n          </div>\n        </div>\n      `;\n      }\n    )\n    .join('');\n}"],"names":["apiKey","performSearch","query","page","perPage","apiUrl","data","axios","el","lightbox","SimpleLightbox","searchQuery","currentPage","event","hits","totalHits","displayNoResultsMessage","displayImages","checkingTheNumberOfCards","error","createMarkup","galleryItems","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAEA,MAAMA,EAAS,qCAER,eAAeC,EAAcC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACjE,MAAMC,EAAS,gCAAgCL,CAAM,MAAME,CAAK,iEAAiEC,CAAI,aAAaC,CAAO,GAEnJ,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,IAAIF,CAAM,EACvC,OAAOC,CACT,CCLA,MAAME,EAAK,CACT,WAAY,SAAS,eAAe,aAAa,EACjD,iBAAkB,SAAS,kBAAkB,aAAa,EAAE,CAAC,EAC7D,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CAClD,EAEA,IAAIC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,SAAU,EACZ,CAAC,EACGC,EAAc,GACdC,EAAc,EAElBJ,EAAG,WAAW,iBAAiB,SAAU,MAAMK,GAAS,CAItD,GAHAA,EAAM,eAAc,EACpBD,EAAc,EACdD,EAAcH,EAAG,iBAAiB,MAAM,KAAI,EACxC,CAACG,EAAa,CAChB,SAAS,OAAO,QAAQ,yBAA0B,IAAI,EACtDH,EAAG,iBAAiB,MAAQ,GAC5B,MACD,CAED,GAAI,CACF,KAAM,CAAE,KAAAM,EAAM,UAAAC,CAAW,EAAG,MAAMd,EAAcU,EAAaC,CAAW,EAExE,GAAIG,IAAc,EAAG,CACnBC,IACA,MACD,CAEGD,GAAa,GACf,SAAS,OAAO,KACd,iBACA,oBAAoBA,CAAS,wFAC7B,IACR,EAEM,SAAS,OAAO,QACd,iBACA,oBAAoBA,CAAS,WAC7B,IACR,EAGIE,EAAcH,EAAMC,CAAS,EAC7BG,EAAyBJ,CAAI,CAC9B,OAAQK,EAAO,CACd,QAAQ,MAAM,gBAAiBA,CAAK,EAEpC,SAAS,OAAO,QACd,eACA,2EACA,IACN,CACG,CACH,CAAC,EAEDX,EAAG,YAAY,iBAAiB,QAAS,MAAMK,GAAS,CACtDD,GAAe,EACf,GAAI,CACF,KAAM,CAAE,KAAAE,CAAI,EAAK,MAAMb,EAAcU,EAAaC,CAAW,EAC7DM,EAAyBJ,CAAI,EAC7BN,EAAG,QAAQ,mBAAmB,YAAaY,EAAaN,CAAI,CAAC,CAC9D,OAAQK,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,CACxC,CACDV,EAAS,QAAO,CAClB,CAAC,EAED,SAASQ,EAAcH,EAAM,CAC3BN,EAAG,QAAQ,UAAYY,EAAaN,CAAI,EACxCL,EAAS,QAAO,CAClB,CACA,SAASS,EAAyBJ,EAAM,CAClCA,EAAK,QAAU,GACjBN,EAAG,YAAY,MAAM,QAAU,SAE/BA,EAAG,YAAY,MAAM,QAAU,OAC/B,SAAS,OAAO,KACd,iBACA,6DACA,IACN,EAEA,CACA,SAASQ,GAA0B,CACjCR,EAAG,iBAAiB,MAAQ,GAC5BA,EAAG,QAAQ,UAAY,GACvBA,EAAG,YAAY,MAAM,QAAU,OAE/B,SAAS,OAAO,QACd,mBACA,4BACA,IACJ,CACA,CAEA,SAASY,EAAaC,EAAc,CAClC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,0CAE2BL,CAAa,YAAYC,CAAI;AAAA,wBAC/CF,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,2BAIvBC,CAAK;AAAA;AAAA,2BAELC,CAAK;AAAA;AAAA,8BAEFC,CAAQ;AAAA;AAAA,+BAEPC,CAAS;AAAA;AAAA;AAAA,OAKnC,EACA,KAAK,EAAE,CACZ"}